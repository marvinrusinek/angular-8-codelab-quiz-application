<mat-card>
  <mat-card-header>
    <div mat-card-avatar class="header-image"></div>
    <mat-card-title>Dependency Injection Quiz</mat-card-title>
    <mat-card-subtitle><h2>Results</h2></mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <section class="statistics">
      <h3>Statistics</h3>
      <p>You scored <strong>{{ correctAnswersCount }}</strong> out of <strong>{{ totalQuestions }}</strong> questions
         (<strong>{{ percentage }}%</strong>) correct.</p>
      <p *ngIf="completionTime < 60; else convert_elapsed_time;">
        You completed the quiz in {{ completionTime }} seconds.</p>
      <ng-template #convert_elapsed_time>
        <p>You completed the quiz in {{ remainingMinutes }} minutes and {{ remainingSeconds }} seconds.</p>
      </ng-template>
      <p>You made a total of {{ totalResponses }} selections in completing this {{ totalQuestions }} questions quiz.</p>
    </section>

    <section class="results">
      <div *ngIf="percentage >= 80">
        <img mat-card-image [src]="ANGULAR_TROPHY" alt="Photo of Angular Trophy">
        <h3>Great job!</h3>
      </div>
      <div *ngIf="percentage >= 60 && percentage < 80">
        <h3>Not bad!</h3>
      </div>
      <div *ngIf="percentage < 60">
        <img mat-card-image [src]="TRY_AGAIN" alt="Photo of Try Again"><br>
        <p>You may want to review the questions that you missed.</p>
      </div>

      <div id="quizAccordion">
        <a class="accordion" data-toggle="collapse" aria-expanded="false" target="_blank" href="#quiz-summary">
          Click here to view a more detailed summary of your quiz</a>

        <section id="quiz-summary" data-parent="#quizAccordion">
          <div class="quiz-summary-question collapse" *ngFor="let question of allQuestions">
            <span>Question #{{ question.questionId }}: </span>{{ question.question }}<br />
            <span>Correct Answer: </span>Option {{ question.answer }}<br />
            <span>Your Answer: </span>Option {{ question.selectedOption }}&nbsp;
            <mat-icon inline="true" class="correct" *ngIf="question.answer === question.selectedOption">done</mat-icon>
            <mat-icon inline="true" class="incorrect" *ngIf="question.answer !== question.selectedOption">clear</mat-icon>
            <br />
            <span>Explanation: </span>Option {{ question.answer }} was correct because {{ question.explanation }}.
          </div>
        </section>
      </div>
    </section>

    <section class="return">
      <mat-card-actions>
        <a routerLink="/intro" class="btn">Restart Quiz</a>
        <a href="https://www.codelab.fun" class="btn">Back to Codelab</a>
      </mat-card-actions>
    </section>

    <hr />

    <section class="challenge-social">
      <h4>Challenge your friends on social media!</h4>
      <div>
        <a class="btn facebook" target="_blank"
           href="https://www.facebook.com/share?text=I scored ' + percentage + ' on this awesome Angular quiz. Try to beat my score at &amp;hashtag=quiz&amp;url=' + {{ codelabUrl }} + '">Share your score</a>
        <a class="btn twitter" target="_blank"
           href="https://www.twitter.com/share?text=I scored ' + percentage + ' on this awesome Angular quiz. Try to beat my score at &amp;hashtag=quiz&amp;url=' + {{ codelabUrl }} + '">Tweet your score</a>
        <a class="btn email"
           href="mailto:?subject=Try to beat my quiz score!&amp;body=I scored ' + percentage + ' on this awesome Angular quiz. Try to beat my score at ' + {{ codelabUrl }} + '">Email a friend</a>
      </div>
    </section>
  </mat-card-content>
</mat-card>
